# 类与对象

C++ 面向对象的三大特性为：**封装、继承、多态**

C++ 认为万事万物都皆为对象，对象上有其属性和行为

**例如**:

* ​人可以作为对象，属性有姓名、年龄、身高、体重等等；行为有走、跑、跳、吃饭、唱歌等等
* ​车也可以作为对象，属性有轮胎、方向盘、车灯等等，行为有载人、放音乐、开空调等等
* 具有相同性质的 **对象**，我们可以抽象称为 **类**，人属于人类，车属于车类

本节鉴于涉及的内容较多，将进一步细分，目录如下:

* [封装](./part4/part4_1.md)
* [对象的初始化和清理](./part4/part4_2.md)
* [C++ 对象模型和 this 指针](./part4/part4_3.md)
* [友元](./part4/part4_4.md)
* [运算符重载](./part4/part4_5.md)
* [继承](./part4/part4_6.md)
* [多态](./part4/part4_7.md)

---

## 补充

拷贝构造函数调用时机方面：

有一种情况是以值方式返回局部对象

此时需要注意 windos 平台会调用拷贝构造函数，linux 平台则不会，g++ 编译器默认做了优化，我们可以开启禁止优化选项，发生拷贝构造

具体可参考 [https://developer.51cto.com/article/702353.html](https://developer.51cto.com/article/702353.html)

对于运算符重载，大体可以遵循以下几个步骤：

* 运算符重载函数是全局函数(类的友元函数)还是类成员函数
* 该函数需不需要返回值，需要返回值，返回的是值还是引用
* 确定重载之后，`operator` 后加上重载的运算符
* 函数括号里面是否需要参数，如果需要，是否有第三方变量(参与其中)或者该类的另一个对象(和当前类作运算)

类大小的计算方式:

* 空类的大小为 1 字节
* 一个类中，虚函数本身、成员函数(包括静态与非静态)和静态数据成员都是不占用类对象的存储空间，也就是非静态数据成员才参与计算
* 对于包含虚函数的类，不管有多少个虚函数，只有一个虚指针 `vptr` 的大小
* 普通继承，派生类继承了所有基类的函数与成员，要按照字节对齐来计算大小
* 虚函数继承，不管是单继承还是多继承，都是继承了基类的 `vptr`(32 位操作系统 4 字节，64 位操作系统 8 字节)
* 虚继承，继承基类的 `vptr`

---
